<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Quantum Clicker</title>
  <style>
    body { font-family: Arial, sans-serif; background:#f0f8ff; margin:0; padding:12px; display:flex; gap:12px; }
    section { background:#fff; border-radius:8px; padding:12px; box-shadow:0 2px 6px rgba(0,0,0,.08); }
    #left-panel { width:260px; }
    #mid-zone { flex:1; display:flex; align-items:center; justify-content:center; min-height:300px; background:#e0f0ff; border-radius:8px; }
    #right-panel { width:320px; }
    #press { width:160px; cursor:pointer; display:block; margin:8px auto; user-drag:none; user-select:none;}
    .buyitem { display:flex; align-items:center; gap:8px; border:1px solid #eee; padding:8px; margin:6px 0; cursor:pointer; }
    .storeimg{ width:48px; height:48px; object-fit:contain }
    .storetext{ margin:0; font-size:16px }
    .storecost{ margin-left:auto; font-weight:600 }
    .count{ font-weight:bold; }
    #reset { cursor:pointer; user-select:none; padding:6px; display:inline-block; border-radius:6px; background:#eee; text-align:center; }
    #name { cursor:pointer; }
    #sep{cursor:pointer; display:inline-block; margin-left:6px;}
    #upgrades {display: grid; grid-template-columns: 1fr 1fr 1fr 1fr;}
    .upgrade {width: 1fr; border: 2px solid black;}
  </style>
</head>
<body>
  <section id="left-panel">
    <div id="name"><h1 id="hname">NOT LOADED</h1></div>
    <!---<div id="sep" title="Dev console">⚙️</div>--->
    <h1 id="amount">0 Units of Energy</h1>
    <h2 id="amountPS">0 Units Per Second</h2>
    <img id="press" src="src/quantum.png" alt="press">
    <div id="reset" title="Reset progress">&#8634; Reset</div>
    <p id="version">Unfinished Version</p>
    <p id="info">Works on mobile & desktop</p>
  </section>

  <section id="mid-zone">
    <div id="middle-placeholder">Middle panel visuals go here</div>
  </section>

  <section id="right-panel">
    <section id="upgrades">
      <div class="upgrade"><img src="src/cursor.png"/>x1</div>
    </section>
    <section id="store">
      <div class="buyitem" id="clicker"><img src="src/cursor.png" class="storeimg" alt=""><h1 class="storetext">Cursor</h1><div class="storecost" id="cursorprice">15 Units</div><div class="count" id="cursor_count">0</div></div>
      <div class="buyitem" id="hydro"><img src="src/dam.png" class="storeimg" alt=""><h1 class="storetext">Hydropower</h1><div class="storecost" id="hydroprice">100 Units</div><div class="count" id="hydro_count">0</div></div>
      <div class="buyitem" id="geo"><img src="src/volcan.png" class="storeimg" alt=""><h1 class="storetext">Geothermal</h1><div class="storecost" id="geoprice">1100 Units</div><div class="count" id="geo_count">0</div></div>
      <div class="buyitem" id="wind"><img src="src/wind.png" class="storeimg" alt=""><h1 class="storetext">Turbine</h1><div class="storecost" id="windprice">12000 Units</div><div class="count" id="wind_count">0</div></div>
      <div class="buyitem" id="sun"><img src="src/sun.png" class="storeimg" alt=""><h1 class="storetext">Solar Panel</h1><div class="storecost" id="sunprice">130000 Units</div><div class="count" id="sun_count">0</div></div>
      <div class="buyitem" id="bio"><img src="src/bio.png" class="storeimg" alt=""><h1 class="storetext">Biofuel</h1><div class="storecost" id="bioprice">1400000 Units</div><div class="count" id="bio_count">0</div></div>
      <div class="buyitem" id="nuke"><img src="src/nuke.png" class="storeimg" alt=""><h1 class="storetext">Nuclear</h1><div class="storecost" id="nukeprice">20.00M Units</div><div class="count" id="nuke_count">0</div></div>
    </section>
  </section>

<script>
/* -------------------------
   Game state
------------------------- */
let clicks = 0;

let cursors = 0, cursorMult = 1, cursorBasePrice = 15;
let dams = 0, damMult = 1, damBasePrice = 100;
let volcan = 0, volcanMult = 1, volcanBasePrice = 1100;
let winds = 0, windMult = 1, windBasePrice = 12000;
let suns = 0, sunMult = 1, sunBasePrice = 130000;
let bios = 0, bioMult = 1, bioBasePrice = 1400000;
let nukes = 0, nukeMult = 1, nukeBasePrice = 20000000;

let clicksPS = 0;

/* DOM elements */
const amountEl = document.getElementById('amount');
const amountPSEl = document.getElementById('amountPS');

const cursorCountEl = document.getElementById('cursor_count');
const damCountEl = document.getElementById('hydro_count');
const geoCountEl = document.getElementById('geo_count');
const windCountEl = document.getElementById('wind_count');
const sunCountEl = document.getElementById('sun_count');
const bioCountEl = document.getElementById('bio_count');
const nukeCountEl = document.getElementById('nuke_count');

const eleCursorPrice = document.getElementById('cursorprice');
const eleDamPrice = document.getElementById('hydroprice');
const eleVolcanPrice = document.getElementById('geoprice');
const eleWindPrice = document.getElementById('windprice');
const eleSunPrice = document.getElementById('sunprice');
const eleBioPrice = document.getElementById('bioprice');
const eleNukePrice = document.getElementById('nukeprice');

const nameEl = document.getElementById('hname');


/* -------------------------
   Utility functions
------------------------- */
function price(base, amountOwned) {
  return Math.ceil(base * Math.pow(1.15, amountOwned));
}

function formatBig(n) {
  if (n >= 1e9) return (n / 1e9).toFixed(2) + "B";
  if (n >= 1e6) return (n / 1e6).toFixed(2) + "M";
  if (n >= 1e3) return (n / 1e3).toFixed(2) + "k";
  return n.toString();
}

function updateUIAll() {
  amountEl.textContent = formatBig(clicks) + " Units of Energy";
  cursorCountEl.textContent = cursors;
  damCountEl.textContent = dams;
  geoCountEl.textContent = volcan;
  windCountEl.textContent = winds;
  sunCountEl.textContent = suns;
  bioCountEl.textContent = bios;
  nukeCountEl.textContent = nukes;

  eleCursorPrice.textContent = formatBig(price(cursorBasePrice, cursors)) + " Units";
  eleDamPrice.textContent = formatBig(price(damBasePrice, dams)) + " Units";
  eleVolcanPrice.textContent = formatBig(price(volcanBasePrice, volcan)) + " Units";
  eleWindPrice.textContent = formatBig(price(windBasePrice, winds)) + " Units";
  eleSunPrice.textContent = formatBig(price(sunBasePrice, suns)) + " Units";
  eleBioPrice.textContent = formatBig(price(bioBasePrice, bios)) + " Units";
  eleNukePrice.textContent = formatBig(price(nukeBasePrice, nukes)) + " Units";

  // Recalculate CPS
  clicksPS = cursors * cursorMult +
             dams * 5 * damMult +
             volcan * 8 * volcanMult +
             winds * 47 * windMult +
             suns * 260 * sunMult +
             bios * 1400 * bioMult +
             nukes * 7800 * nukeMult;

  amountPSEl.textContent = formatBig(clicksPS) + " Units Per Second";
}

/* -------------------------
   Save / Load
------------------------- */
function saveGame() {
  const state = {clicks,cursors,cursorMult,dams,damMult,volcan,volcanMult,winds,windMult,suns,sunMult,bios,bioMult,nukes,nukeMult,name:nameEl.textContent};
  try { localStorage.setItem('quantum_clicker_v1', JSON.stringify(state)); } catch(e){ console.warn('Save failed',e);}
}

function loadGame() {
  try {
    const raw = localStorage.getItem('quantum_clicker_v1');
    if (!raw) return;
    const s = JSON.parse(raw);
    clicks = Number(s.clicks||0);
    cursors = Number(s.cursors||0);
    cursorMult = Number(s.cursorMult||1);
    dams = Number(s.dams||0);
    damMult = Number(s.damMult||1);
    volcan = Number(s.volcan||0);
    volcanMult = Number(s.volcanMult||1);
    winds = Number(s.winds||0);
    windMult = Number(s.windMult||1);
    suns = Number(s.suns||0);
    sunMult = Number(s.sunMult||1);
    bios = Number(s.bios||0);
    bioMult = Number(s.bioMult||1);
    nukes = Number(s.nukes||0);
    nukeMult = Number(s.nukeMult||1);
    if (s.name) nameEl.textContent = s.name;
  } catch(e){ console.warn('Load failed',e); }
}

/* -------------------------
   Initialization
------------------------- */
loadGame();
updateUIAll();

/* -------------------------
   Main CPS tick
------------------------- */
setInterval(() => { clicks += clicksPS; updateUIAll(); saveGame(); }, 1000);

/* -------------------------
   Manual click
------------------------- */
document.getElementById('press').addEventListener('click', () => { clicks++; updateUIAll(); saveGame(); });

/* -------------------------
   Reset
------------------------- */
document.getElementById('reset').addEventListener('click', () => {
  if(!confirm('Are you sure you want to reset?')) return;
  clicks = 0;
  cursors = dams = volcan = winds = suns = bios = nukes = 0;
  cursorMult = damMult = volcanMult = windMult = sunMult = bioMult = nukeMult = 1;
  updateUIAll();
  saveGame();
});

/* -------------------------
   Name edit & secret NLAE
------------------------- */
document.getElementById('name').addEventListener('click', () => {
  let newname = prompt('New Name for Laboratory:');
  if (!newname) return;
  if(newname.length>28){ alert('Name too long!'); return; }
  nameEl.textContent = newname+"'s Laboratory";
  if(newname.toUpperCase()==="NLAE"){ console.info("Dev mode unlocked!"); }
  saveGame();
});

/* -------------------------
   Store buy handlers
------------------------- */
function buyCursor(){ const cost = price(cursorBasePrice,cursors); if(clicks>=cost){ clicks-=cost; cursors++; updateUIAll(); saveGame(); } }
function buyDam(){ const cost = price(damBasePrice,dams); if(clicks>=cost){ clicks-=cost; dams++; updateUIAll(); saveGame(); } }
function buyGeo(){ const cost = price(volcanBasePrice,volcan); if(clicks>=cost){ clicks-=cost; volcan++; updateUIAll(); saveGame(); } }
function buyWind(){ const cost = price(windBasePrice,winds); if(clicks>=cost){ clicks-=cost; winds++; updateUIAll(); saveGame(); } }
function buySun(){ const cost = price(sunBasePrice,suns); if(clicks>=cost){ clicks-=cost; suns++; updateUIAll(); saveGame(); } }
function buyBio(){ const cost = price(bioBasePrice,bios); if(clicks>=cost){ clicks-=cost; bios++; updateUIAll(); saveGame(); } }
function buyNuke(){ const cost = price(nukeBasePrice,nukes); if(clicks>=cost){ clicks-=cost; nukes++; updateUIAll(); saveGame(); } }

document.getElementById('clicker').addEventListener('click', buyCursor);
document.getElementById('hydro').addEventListener('click', buyDam);
document.getElementById('geo').addEventListener('click', buyGeo);
document.getElementById('wind').addEventListener('click', buyWind);
document.getElementById('sun').addEventListener('click', buySun);
document.getElementById('bio').addEventListener('click', buyBio);
document.getElementById('nuke').addEventListener('click', buyNuke);

/* -------------------------
   Periodic autosave
------------------------- */
setInterval(saveGame,5000);
window.addEventListener('beforeunload',saveGame);
window.addEventListener('pagehide',saveGame);
</script>

</body>
</html>
